<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="]tL_Wxd0M6f,fcQwy,3r">STOP_SPEED</variable><variable id="4d~i}2k(W?n-PMB28H{u">state</variable><variable id="*canuy(e$%,8-PL,v{[A">currentTag</variable><variable id=":t4K`dYzMjS^)N5Nf_/?">lastTag</variable><variable id="Evk^sABviRj:|ftGig6O">tagCount</variable><variable id="6?Qn9*{M/:J,aqJSsnu-">TAG_STABILITY_COUNT</variable><variable id="x53@jL@jjmU/*.1te5Mw">FORWARD_DURATION</variable><variable id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</variable><variable id="bc|i`jKL8p]2VLbI$v^H">LOOP_INTERVAL</variable><variable id="!^3XFs56WXx,j~W!84J|">FORWARD_SPEED</variable></variables><comment id="^0ZBq(Q-2*RFQl%UFAVR" x="2927" y="1721" w="187" h="120">
狀態機：0=等待，1=前進，2=轉彎
</comment><block type="pxt-on-start" id="@wwm,bdlkolNLc$zo![j" x="20" y="20"><statement name="HANDLER"><block type="variables_set" id="@*x?q,8+K^vTK-bVMKw|"><field name="VAR" id="!^3XFs56WXx,j~W!84J|">FORWARD_SPEED</field><comment pinned="false" h="80" w="160">電機速度常數（僅前進速度可調，其他速度在函數內手動插入）
前進速度（標籤1，建議範圍：50-200）</comment><value name="VALUE"><shadow type="math_number" id=".p,fHkm`aNQB[Q~9hzdh"><field name="NUM">150</field></shadow></value><next><block type="variables_set" id="~7/SnP^M7Ef8D-%+0?p/"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field><comment pinned="false" h="80" w="160">停止速度
轉彎持續時間（毫秒，校準為90度原地旋轉，建議範圍：400-800）</comment><value name="VALUE"><shadow type="math_number" id="l,Cg1GV#;$w)`Z[v5Vl:"><field name="NUM">900</field></shadow></value><next><block type="variables_set" id="iav[]U;8l-{=jzx~Yi{m"><field name="VAR" id="x53@jL@jjmU/*.1te5Mw">FORWARD_DURATION</field><comment pinned="false" h="80" w="160">前進持續時間（毫秒）</comment><value name="VALUE"><shadow type="math_number" id="^)9QhJG16n8|f!n1G??p"><field name="NUM">500</field></shadow></value><next><block type="variables_set" id="rsEq6HK=bpxj/OL9vX#a"><field name="VAR" id="bc|i`jKL8p]2VLbI$v^H">LOOP_INTERVAL</field><comment pinned="false" h="80" w="160">主循環刷新間隔（毫秒）</comment><value name="VALUE"><shadow type="math_number" id="ORGw_,r8d~0a9%IfVhu%"><field name="NUM">1000</field></shadow></value><next><block type="variables_set" id="`*_PdG/4Hz9.oc9h?o)V"><field name="VAR" id="6?Qn9*{M/:J,aqJSsnu-">TAG_STABILITY_COUNT</field><comment pinned="false" h="80" w="160">標籤連續檢測次數</comment><value name="VALUE"><shadow type="math_number" id="=kbAloU0Xu/l`*1zmIlG"><field name="NUM">2</field></shadow></value><next><block type="basic_show_icon" id="`rOek[|RN%j9AcGg7tJp"><field name="i">IconNames.Yes</field><comment pinned="false" h="80" w="160">初始化
顯示"對勾"表示初始化成功</comment><next><block type="huskylens_initI2c" id="-[-4jy$%ZemTV~|avetn"><comment pinned="false" h="80" w="160">初始化Huskylens的I2C通信</comment><next><block type="huskylens_writeName" id="I^4AIs@0!:D(d^I+gTF%"><comment pinned="false" h="80" w="160">設置標籤名稱</comment><value name="id"><shadow type="math_number" id=";|nv$6sii175Se4?dqT/"><field name="NUM">1</field></shadow></value><value name="name"><shadow type="text" id="8[R}xk,#7yp6tu]zg=u7"><field name="TEXT">Forward</field></shadow></value><next><block type="huskylens_writeName" id="){U)UmW/[rw2/?R`mV[W"><comment pinned="false" h="80" w="160">原地左轉90度</comment><value name="id"><shadow type="math_number" id="GABa/F^-!`=fmZ|n#+Wq"><field name="NUM">2</field></shadow></value><value name="name"><shadow type="text" id="TS]^nJN|{wfuRlTz3Ril"><field name="TEXT">Turn Left</field></shadow></value><next><block type="huskylens_writeName" id="XR-:=fOvhPNp9BHk[Oh]"><comment pinned="false" h="80" w="160">原地右轉90度</comment><value name="id"><shadow type="math_number" id="wwJI@ZvV(]R1_^yfQRZj"><field name="NUM">3</field></shadow></value><value name="name"><shadow type="text" id=",^)47(cqQhwEmMs3Vp!s"><field name="TEXT">Turn Right</field></shadow></value><next><block type="controls_if" id="K?-s-y^iA0Bkpn;Ve(6e"><data>{"commentRefs":[],"fieldData":{}}</data><value name="IF0"><shadow type="logic_boolean" id="]hh!thC#}~WbmV:i^x09"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="?a*O:}v@-LG,#In4CM@8"><value name="BOOL"><shadow type="logic_boolean" id=")}lu2SNnx70qDZZ`vEOJ"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="g9C-YZrd~,C-A6og~A)_"><field name="EXPRESSION">huskylens.initMode(protocolAlgorithm.OBJECTCLASSIFICATION)</field></block></value></block></value><statement name="DO0"><block type="function_call" id="6l7^N+i$%Ni?+{zjoD)Z"><mutation name="showError" functionid="|R+LsozALRb5qfjDWWk@"></mutation><comment pinned="false" h="80" w="160">初始化失敗，顯示錯誤並停止</comment><next><block type="typescript_statement" id="o}:KQ0fXrKD@/}?sA^ZP"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="basic.forever(() =&gt; { });" numlines="1"></mutation><comment pinned="false" h="80" w="160">進入空循環，停止程序</comment></block></next></block></statement><next><block type="variables_set" id="[`SvaMg}GH88q@Y4.W[3"><field name="VAR" id=":t4K`dYzMjS^)N5Nf_/?">lastTag</field><comment pinned="false" h="80" w="160">連續檢測計數器
上次檢測的標籤ID</comment><value name="VALUE"><shadow type="math_number" id="w9?gi1)eO1;prwz!C9Xg"><field name="NUM">-1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="1,#RGb:TrfO4tg=k`l.~" x="732" y="20"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">校準按鈕（用於調整轉彎時間）</comment><statement name="HANDLER"><block type="variables_change" id="`~54[?YR#oLPc*;ug[hM"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field><value name="VALUE"><shadow type="math_number" id=";Rz8bX/p9-lIkr_Ph8Ad"><field name="NUM">50</field></shadow></value><next><block type="device_show_number" id="j?*kn1.DTosi3!}x{BHO"><value name="number"><block type="variables_get" id="Y-{*t~/j,u`V%Lz-@~K%"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value><next><block type="device_clear_display" id="=TRBquRG4XO`SrHGt(y`"></block></next></block></next></block></statement></block><block type="device_button_event" id="~?_%,j:{dEu/k/0oZhg?" x="1089" y="20"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="variables_set" id="}UJI~u=40z#)/%v+}]~:"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field><value name="VALUE"><shadow type="math_number" id="Qov=gyD5cJ_U#eo?887]"><field name="NUM">0</field></shadow><block type="math_op2" id="{*}FdR.B`YMgh$Ukv.Ce"><field name="op">max</field><value name="x"><shadow type="math_number" id="0Ff$I@70d][5i7jKdu`F"><field name="NUM">100</field></shadow></value><value name="y"><block type="math_arithmetic" id="E%TcY0EP!ocCN/#qqr)_"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="ba=W(u+k=!iKL$|qpe$("><field name="NUM">0</field></shadow><block type="variables_get" id="AC@Dti-%C3x.1xjPcV?W"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value><value name="B"><shadow type="math_number" id="DNLR%1t3`mEjCMG6D%]}"><field name="NUM">50</field></shadow></value></block></value></block></value><next><block type="device_show_number" id="DQ[7fMd!z,?}USkc`xl8"><value name="number"><block type="variables_get" id="vE+}lBAfvQ}Aeh7Q.5%p"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value><next><block type="device_clear_display" id="V{s%z]sHA+lQs$:XES%h"></block></next></block></next></block></statement></block><block type="device_button_event" id="m87R)l_0t;dSyy55@q+u" x="1888" y="20"><field name="NAME">Button.AB</field><statement name="HANDLER"><block type="function_call" id="@MtWfkSa}*c_s9,;WVC4"><mutation name="turnLeft" functionid="3l(@23KAy~dn~X6UvQ9v"><arg name="duration" id="vpg8o4kgsdinh5xcmschh" type="number"></arg></mutation><comment pinned="false" h="80" w="160">測試左轉</comment><value name="vpg8o4kgsdinh5xcmschh"><shadow type="math_number" id="N12?,jYg#ZWPd99;}|il"><field name="NUM">1</field></shadow><block type="variables_get" id="IJ#Bf?nzZY/fpz~r~RZA"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value><next><block type="device_pause" id="q9.=Ud74Dppn+,v78$AL"><data>{"commentRefs":[],"fieldData":{}}</data><value name="pause"><shadow type="timePicker" id="%{kLEc!;=%pdQml+;+qX"><field name="ms">1000</field></shadow></value><next><block type="function_call" id="i%1o#,^nj^Crr,kwsv)T"><mutation name="turnRight" functionid="Xo8,8X3UM(?J5UQ5!NA~"><arg name="duration" id="fv0tpfvzltl00xbluk4c" type="number"></arg></mutation><comment pinned="false" h="80" w="160">測試右轉</comment><value name="fv0tpfvzltl00xbluk4c"><shadow type="math_number" id="i#+=ig}d:1+NW78OxYK0"><field name="NUM">1</field></shadow><block type="variables_get" id="F9W2bmaBar}OPs_=C$2("><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value></block></next></block></next></block></statement></block><block type="device_forever" id="q]zfgBU:#FeVFN}$B7sE" x="2275" y="20"><comment pinned="false" h="80" w="160">上次檢測的標籤ID
主循環</comment><statement name="HANDLER"><block type="huskylens_request" id="]TA+NK!BdOdlEPtH;(nS"><comment pinned="false" h="80" w="160">獲取Huskylens數據</comment><next><block type="controls_if" id="-HFw9|uo@dHC-;yyi-#2"><mutation elseif="2"></mutation><comment pinned="false" h="80" w="160">狀態機邏輯</comment><value name="IF0"><shadow type="logic_boolean" id="7kUS5giG8Jp?t%w|/d$}"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="wG;YE2N$1pY=lc4PIQ6]"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="=n8e-eD5ag,1_bVT{L%0"><field name="NUM">0</field></shadow><block type="variables_get" id="i(/4o*SJis)pf#IIpLp~"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field></block></value><value name="B"><shadow type="math_number" id="*6$SNC7E7zv~K*}l[phQ"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="typescript_statement" id="pNofW!rY:4,~V3[9/:SF"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let currentTag = huskylens.isAppear(1, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 1 :" line1="            huskylens.isAppear(2, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 2 :" line2="                huskylens.isAppear(3, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 3 : -1;" numlines="3" declaredvars="currentTag"></mutation><next><block type="controls_if" id=")bFmfSILs|Q/f}-1TGMT"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">檢查標籤穩定性</comment><value name="IF0"><shadow type="logic_boolean" id="s+fQ`SB^ge{wx3fzAqe("><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id=".b4OI,)r?jU|`%7)yBj/"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id=":?zU/-WRWT`9f(6a?=L!"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="MDTi/)!aQJ}RnevW!:v5"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="A./mqH!rez8Ri[-0dkee"><field name="NUM">0</field></shadow><block type="variables_get" id="+O4ZCdr,VfcP]#WK`X=("><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><value name="B"><shadow type="math_number" id="EtQ@i;8iY1DW@v,R%c*j"><field name="NUM">0</field></shadow><block type="variables_get" id="tnE#,^cmQfmobYta3/lb"><field name="VAR" id=":t4K`dYzMjS^)N5Nf_/?">lastTag</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="^o/`HiGN~LQmL,vmpiD^"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^Mf.REjea1BCP*.[q_yI"><field name="OP">NEQ</field><value name="A"><shadow type="math_number" id="jt=G6jU+J.;;%Fd4~aXD"><field name="NUM">0</field></shadow><block type="variables_get" id="mo@JI?{N9R)n]0Xhgx1w"><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><value name="B"><shadow type="math_number" id="RYQQ{5j@zVy39[TG=,!D"><field name="NUM">-1</field></shadow></value></block></value></block></value><statement name="DO0"><block type="variables_change" id="9~;?;bz%/*0@$Hik/A,A"><field name="VAR" id="Evk^sABviRj:|ftGig6O">tagCount</field><value name="VALUE"><shadow type="math_number" id="(;phXtIaVNO7nTvb+E7k"><field name="NUM">1</field></shadow></value><next><block type="controls_if" id=";=b#u`$c}[xM=p[Mj1C{"><value name="IF0"><shadow type="logic_boolean" id="8rP|w3$EayBTla}7o@?7"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="c_FUo.$Cf(BQ5:^?0Nb6"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="XuDkgv]+79Zuzp6,?7#L"><field name="NUM">0</field></shadow><block type="variables_get" id="/`3y/*h%=+I[y`LQg!Tw"><field name="VAR" id="Evk^sABviRj:|ftGig6O">tagCount</field></block></value><value name="B"><shadow type="math_number" id="r(Dk3l?tk!x/iceVsFwZ"><field name="NUM">0</field></shadow><block type="variables_get" id="4D7cPNER7q6pgULygXU:"><field name="VAR" id="6?Qn9*{M/:J,aqJSsnu-">TAG_STABILITY_COUNT</field></block></value></block></value><statement name="DO0"><block type="controls_if" id="S5]F}D|0%Vr;$ct}xzQ#"><mutation elseif="2"></mutation><comment pinned="false" h="80" w="160">穩定檢測到標籤，執行對應動作</comment><value name="IF0"><shadow type="logic_boolean" id="O}?)me=QR9jSV)!bAt5X"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="R~^5o-/5C[8M^$$9WOIK"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="}Z)HurLdD0BUTygi)r?I"><field name="NUM">0</field></shadow><block type="variables_get" id="57{l(~]BQ=4.V[cWsESj"><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><value name="B"><shadow type="math_number" id=",F]f`;ykkji6g2YEz7hC"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="9fjDM|;*r2)rkEh7iG@u"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><value name="VALUE"><shadow type="math_number" id="H4c~2O/zkQWV{mIAy2(E"><field name="NUM">1</field></shadow></value><next><block type="function_call" id="guf-~cyGROGz*,NXY`#K"><mutation name="moveForward" functionid="NEVAeM3+s;dYbG/k9SoC"><arg name="duration" id="nai8s5u60ewqrcvwyj1h" type="number"></arg></mutation><comment pinned="false" h="80" w="160">前進1秒並停止</comment><value name="nai8s5u60ewqrcvwyj1h"><shadow type="math_number" id="_hE!@*0F+=lF,ZI{`lA0"><field name="NUM">1</field></shadow><block type="variables_get" id="V$(QBkh1}gHa$BqFzUS)"><field name="VAR" id="x53@jL@jjmU/*.1te5Mw">FORWARD_DURATION</field></block></value></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="L8KYY8*8$$$F3U+4-rA?"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="4!+G-%XJ_dTPB,zYi#pS"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="M0=}y09.y,!.2zu-6_rf"><field name="NUM">0</field></shadow><block type="variables_get" id="J?(^Wr6IveIO1:RY@?]F"><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><value name="B"><shadow type="math_number" id="D^#+tMJv9?splgOs+?`O"><field name="NUM">2</field></shadow></value></block></value><statement name="DO1"><block type="variables_set" id="Tz1:hY,T]djw}JB0-$l="><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><value name="VALUE"><shadow type="math_number" id="U?,14W?_zQq=b9XcCgU@"><field name="NUM">2</field></shadow></value><next><block type="function_call" id="NZ.Xpie4(3dDT9!,8#8r"><mutation name="turnLeft" functionid="3l(@23KAy~dn~X6UvQ9v"><arg name="duration" id="vpg8o4kgsdinh5xcmschh" type="number"></arg></mutation><comment pinned="false" h="80" w="160">原地左轉90度並停止</comment><value name="vpg8o4kgsdinh5xcmschh"><shadow type="math_number" id=",?6-F~Oh-*j4o.bvN:c!"><field name="NUM">1</field></shadow><block type="variables_get" id="l6A2tZ7cCi(XB:d)%|Tt"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value></block></next></block></statement><value name="IF2"><shadow type="logic_boolean" id="!60nhmh.agXf@c*.gyI2"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="6cJCb!8_eykjPPPC1D#c"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="98Nw=R,3%zuRl`a5ZT]9"><field name="NUM">0</field></shadow><block type="variables_get" id="AV2nIpd{EkNr4gKSV@M="><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><value name="B"><shadow type="math_number" id="88[z25Vc5_]m^DRpywR@"><field name="NUM">3</field></shadow></value></block></value><statement name="DO2"><block type="variables_set" id="(0z`%)Qzew`e@HHZ}]DR"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><value name="VALUE"><shadow type="math_number" id="wJ=,a5Llh{AdWGdZb#pm"><field name="NUM">2</field></shadow></value><next><block type="function_call" id="Cr)-38$L)i26cx;9^jqs"><mutation name="turnRight" functionid="Xo8,8X3UM(?J5UQ5!NA~"><arg name="duration" id="fv0tpfvzltl00xbluk4c" type="number"></arg></mutation><comment pinned="false" h="80" w="160">原地右轉90度並停止</comment><value name="fv0tpfvzltl00xbluk4c"><shadow type="math_number" id="N.liaT(w9xFb-F}7Vt@,"><field name="NUM">1</field></shadow><block type="variables_get" id="sY)Em{^nLG@{cL|n6eZq"><field name="VAR" id="ZY8fWANhHi=G-j][aSI*">TURN_DURATION</field></block></value></block></next></block></statement><next><block type="variables_set" id="=$YkOB(,oOB-2``J7Wus"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><comment pinned="false" h="80" w="160">返回等待狀態</comment><value name="VALUE"><shadow type="math_number" id="p#UElP2*7bcOS.u.!rD1"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="KnC1UX5~$rozN|+E~lD*"><field name="VAR" id="Evk^sABviRj:|ftGig6O">tagCount</field><comment pinned="false" h="80" w="160">重置計數器</comment><value name="VALUE"><shadow type="math_number" id="xKhS?,*KS8eO;c5fCdS("><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="SS[_H)oa{*_`u4dZkyB`"><field name="VAR" id=":t4K`dYzMjS^)N5Nf_/?">lastTag</field><comment pinned="false" h="80" w="160">重置標籤</comment><value name="VALUE"><shadow type="math_number" id="p8^F2vIP(go{iuP.vbj["><field name="NUM">-1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name="ELSE"><block type="variables_set" id="w`p5?8@491vC_?QU5BT4"><field name="VAR" id="Evk^sABviRj:|ftGig6O">tagCount</field><comment pinned="false" h="80" w="160">新標籤，計數從1開始</comment><value name="VALUE"><shadow type="math_number" id="-xj~XHSBo3iu%BC@E0bM"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="NJYVrdgGWh@sm#tDD#W["><field name="VAR" id=":t4K`dYzMjS^)N5Nf_/?">lastTag</field><data>{"commentRefs":[],"fieldData":{}}</data><value name="VALUE"><shadow type="math_number" id="4QlGdF(oN-bUz+xU9`c*"><field name="NUM">0</field></shadow><block type="variables_get" id="U]B;VpUFwLY*[=Ku!mu+"><field name="VAR" id="*canuy(e$%,8-PL,v{[A">currentTag</field></block></value><next><block type="function_call" id="{]rgJMJ53Zj_$PLRdPN%"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation><comment pinned="false" h="80" w="160">未穩定檢測，保持停止</comment></block></next></block></next></block></statement></block></next></block></statement><value name="IF1"><shadow type="logic_boolean" id="|DcqVLbOg^~7{Q~)]%8f"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="9~E@8TLu7Bz^d5jTxC8x"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=".xMtC;z)ucX.GIvwjYDR"><field name="NUM">0</field></shadow><block type="variables_get" id="Jb%f+37Y0IDI[9q{=7?L"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field></block></value><value name="B"><shadow type="math_number" id="UH-S}tOXGz9YeOKb}IX*"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="variables_set" id="7!2cz%0`,)f)ZS1`(QsJ"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><comment pinned="false" h="80" w="160">前進狀態在moveForward中完成，立即返回狀態0</comment><value name="VALUE"><shadow type="math_number" id="U8/vwfNuGUCHggveQ:1^"><field name="NUM">0</field></shadow></value></block></statement><value name="IF2"><shadow type="logic_boolean" id="*Sftj1KA`FZjU,b@{]^n"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="FSLB4n^%fdtx]cEM[O4n"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=",ZoOUU[UF6Dxt4^a#|h`"><field name="NUM">0</field></shadow><block type="variables_get" id="R#=leb@O;54L#*)rwDAh"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field></block></value><value name="B"><shadow type="math_number" id="c#81!q}|9DRINFs[-r+0"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="variables_set" id="PQwRn(Luq$_=Z[s_U,vt"><field name="VAR" id="4d~i}2k(W?n-PMB28H{u">state</field><comment pinned="false" h="80" w="160">轉彎狀態在turnLeft或turnRight中完成，立即返回狀態0</comment><value name="VALUE"><shadow type="math_number" id="0[c(%p,/Giy:ZBDCcI0w"><field name="NUM">0</field></shadow></value></block></statement><next><block type="device_pause" id="1QH94G@9}EneqE0g~UFL"><comment pinned="false" h="80" w="160">限制刷新頻率為每秒一次</comment><value name="pause"><shadow type="timePicker" id="hVM#tr;UsI905SanwB-y"><field name="ms">NaN</field></shadow><block type="variables_get" id="1S5~2FrdVCIC3s4y020x"><field name="VAR" id="bc|i`jKL8p]2VLbI$v^H">LOOP_INTERVAL</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="./I=Q(Z.7jFJ5e#7Zjd]" x="20" y="1721"><mutation name="move" functionid="D1q!$|l^!4c*Ve)S;U}S"><arg name="m1Speed" id="i0tkc1ax8vhuxqs3lu286" type="number"></arg><arg name="m2Speed" id="3xy868qjg9vn1ktze72cb" type="number"></arg><arg name="m3Speed" id="6setg2gnbztk7fvtxq07" type="number"></arg><arg name="m4Speed" id="dyngo154fjsl0mxkm0iuj" type="number"></arg></mutation><field name="function_name">move</field><comment pinned="false" h="80" w="160">標籤連續檢測次數
通用移動函數：控制四個電機的速度</comment><value name="i0tkc1ax8vhuxqs3lu286"><block type="argument_reporter_number" id="SqU?CH-eOaOZ%WU+177O"><mutation duplicateondrag="true"></mutation><field name="VALUE">m1Speed</field></block></value><value name="3xy868qjg9vn1ktze72cb"><block type="argument_reporter_number" id="o{KL-|1I?RBmFULh(mMP"><mutation duplicateondrag="true"></mutation><field name="VALUE">m2Speed</field></block></value><value name="6setg2gnbztk7fvtxq07"><block type="argument_reporter_number" id="2qs@UEdz$,fWul(8/}%E"><mutation duplicateondrag="true"></mutation><field name="VALUE">m3Speed</field></block></value><value name="dyngo154fjsl0mxkm0iuj"><block type="argument_reporter_number" id="C{_Q7~c.xMjede2L]`78"><mutation duplicateondrag="true"></mutation><field name="VALUE">m4Speed</field></block></value><statement name="STACK"><block type="SuperBit_MotorRunDual" id="HJY`yn4PT?sm7y6${T5e"><field name="motor1">SuperBit.enMotors.M1</field><field name="motor2">SuperBit.enMotors.M2</field><value name="speed1"><shadow type="math_number_minmax" id="/1-9C6G*;k]5ylEm;}*A"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="!Q@KcxC2NU,UCebqg10="><field name="VALUE">m1Speed</field></block></value><value name="speed2"><shadow type="math_number_minmax" id=",T6;{wZocQcodDD9ROC^"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="awzQAvXP(sal`aHj$E-6"><field name="VALUE">m2Speed</field></block></value><next><block type="SuperBit_MotorRunDual" id="lLchXW]dNr55q?l|iWv]"><field name="motor1">SuperBit.enMotors.M3</field><field name="motor2">SuperBit.enMotors.M4</field><value name="speed1"><shadow type="math_number_minmax" id="J[;qbtKM2(b9KvLSa#@t"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="3ZFoolMtCl3HO#X0Bq)o"><field name="VALUE">m3Speed</field></block></value><value name="speed2"><shadow type="math_number_minmax" id="(/d`85@+8bXLT`p8``?G"><mutation min="-255" max="255" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="argument_reporter_number" id="cT9hQ/4n)_Ia)?q^2tj5"><field name="VALUE">m4Speed</field></block></value></block></next></block></statement></block><block type="function_definition" id="6c%eZ5iw_{)=RABMG[wf" x="642" y="1721"><mutation name="moveForward" functionid="NEVAeM3+s;dYbG/k9SoC"><arg name="duration" id="nai8s5u60ewqrcvwyj1h" type="number"></arg></mutation><field name="function_name">moveForward</field><comment pinned="false" h="80" w="160">前進：所有電機以反向速度運行指定時間（修復反轉問題）</comment><value name="nai8s5u60ewqrcvwyj1h"><block type="argument_reporter_number" id="T:=~g}_{mvmeo!,9My3T"><mutation duplicateondrag="true"></mutation><field name="VALUE">duration</field></block></value><statement name="STACK"><block type="function_call" id="q@Ij8!f:-@.dXN$W(3rx"><mutation name="move" functionid="D1q!$|l^!4c*Ve)S;U}S"><arg name="m1Speed" id="i0tkc1ax8vhuxqs3lu286" type="number"></arg><arg name="m2Speed" id="3xy868qjg9vn1ktze72cb" type="number"></arg><arg name="m3Speed" id="6setg2gnbztk7fvtxq07" type="number"></arg><arg name="m4Speed" id="dyngo154fjsl0mxkm0iuj" type="number"></arg></mutation><comment pinned="false" h="80" w="160">反轉速度</comment><value name="i0tkc1ax8vhuxqs3lu286"><shadow type="math_number" id="Z|l(,Po(B{YHM^AG(NSZ"><field name="NUM">-200</field></shadow></value><value name="3xy868qjg9vn1ktze72cb"><shadow type="math_number" id="FExyU(={{q$RW,02aN(a"><field name="NUM">-200</field></shadow></value><value name="6setg2gnbztk7fvtxq07"><shadow type="math_number" id="VaJFkpTpG].YgBx!sAk}"><field name="NUM">-200</field></shadow></value><value name="dyngo154fjsl0mxkm0iuj"><shadow type="math_number" id="Zp9AD*qhf`LvnFY27JN4"><field name="NUM">100</field></shadow></value><next><block type="device_show_leds" id="|AQI7p*Gbo[mCt)-s#2$"><field name="LEDS">`
        . . # . . 
        . # # # . 
        # . # . # 
        . . # . . 
        . . # . .
        `</field><comment pinned="false" h="80" w="160">顯示前進圖標</comment><next><block type="device_pause" id="m9I|v1E0y9-d2EGK*Uev"><comment pinned="false" h="80" w="160">持續指定時間</comment><value name="pause"><shadow type="timePicker" id="N8@jnoJm~DZ=l}h]DM*("><field name="ms">NaN</field></shadow><block type="argument_reporter_number" id="RoC(5AL{hAetXm|tq|x!"><field name="VALUE">duration</field></block></value><next><block type="function_call" id="FC[oxNI}).REtO-G*%$r"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation><comment pinned="false" h="80" w="160">停止</comment></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="p]i!cP0bcO?%]|th+C%1" x="1079" y="1721"><mutation name="turnLeft" functionid="3l(@23KAy~dn~X6UvQ9v"><arg name="duration" id="vpg8o4kgsdinh5xcmschh" type="number"></arg></mutation><field name="function_name">turnLeft</field><comment pinned="false" h="80" w="160">左轉：M1和M4反轉，M2和M3正轉（原地左轉90度）</comment><value name="vpg8o4kgsdinh5xcmschh"><block type="argument_reporter_number" id="#6gD;wBeN[K%n9}D$XAK"><mutation duplicateondrag="true"></mutation><field name="VALUE">duration</field></block></value><statement name="STACK"><block type="function_call" id="76cqa3J=oW.Qj=TT_$O,"><mutation name="move" functionid="D1q!$|l^!4c*Ve)S;U}S"><arg name="m1Speed" id="i0tkc1ax8vhuxqs3lu286" type="number"></arg><arg name="m2Speed" id="3xy868qjg9vn1ktze72cb" type="number"></arg><arg name="m3Speed" id="6setg2gnbztk7fvtxq07" type="number"></arg><arg name="m4Speed" id="dyngo154fjsl0mxkm0iuj" type="number"></arg></mutation><comment pinned="false" h="80" w="160">手動插入速度值（可修改，例如-120, 120, -120, 120）</comment><value name="i0tkc1ax8vhuxqs3lu286"><shadow type="math_number" id="D{R0AwZT1;,;[*Zlj-[h"><field name="NUM">0</field></shadow></value><value name="3xy868qjg9vn1ktze72cb"><shadow type="math_number" id="JWxNLqV8wPgorQt-BCAb"><field name="NUM">-150</field></shadow></value><value name="6setg2gnbztk7fvtxq07"><shadow type="math_number" id="HMFhn1NDspi*LN7CNg`}"><field name="NUM">-150</field></shadow></value><value name="dyngo154fjsl0mxkm0iuj"><shadow type="math_number" id="HEf5|NI(ciB9u8vuB15z"><field name="NUM">-150</field></shadow></value><next><block type="device_show_leds" id="4RylcfskVKed(XcAc/q."><field name="LEDS">`
        . . # . . 
        . # . . . 
        # # # # # 
        . # . . . 
        . . # . .
        `</field><comment pinned="false" h="80" w="160">顯示左轉圖標</comment><next><block type="device_pause" id="zubo}rP+21aCVbCN57p_"><comment pinned="false" h="80" w="160">持續指定時間</comment><value name="pause"><shadow type="timePicker" id="K5DLT=NJQjo3,XMm0Ucb"><field name="ms">NaN</field></shadow><block type="argument_reporter_number" id="e^UJZB#%Vo1fGz@%vsw^"><field name="VALUE">duration</field></block></value><next><block type="function_call" id="uOZ4Jp,el4#Ng!/15`vl"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation><comment pinned="false" h="80" w="160">停止</comment></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="pb,bpB/vHn9?rh[/g4V+" x="1506" y="1721"><mutation name="turnRight" functionid="Xo8,8X3UM(?J5UQ5!NA~"><arg name="duration" id="fv0tpfvzltl00xbluk4c" type="number"></arg></mutation><field name="function_name">turnRight</field><comment pinned="false" h="80" w="160">右轉：M1和M4正轉，M2和M3反轉（原地右轉90度）</comment><value name="fv0tpfvzltl00xbluk4c"><block type="argument_reporter_number" id="Mw9d|{`+5Q|gGTqo-3bG"><mutation duplicateondrag="true"></mutation><field name="VALUE">duration</field></block></value><statement name="STACK"><block type="function_call" id="3L0LT/s5v7I%etI1!)(`"><mutation name="move" functionid="D1q!$|l^!4c*Ve)S;U}S"><arg name="m1Speed" id="i0tkc1ax8vhuxqs3lu286" type="number"></arg><arg name="m2Speed" id="3xy868qjg9vn1ktze72cb" type="number"></arg><arg name="m3Speed" id="6setg2gnbztk7fvtxq07" type="number"></arg><arg name="m4Speed" id="dyngo154fjsl0mxkm0iuj" type="number"></arg></mutation><comment pinned="false" h="80" w="160">手動插入速度值（可修改，例如120, -120, 120, -120）</comment><value name="i0tkc1ax8vhuxqs3lu286"><shadow type="math_number" id="48}CPwg/;RB5[FS2i~u}"><field name="NUM">-180</field></shadow></value><value name="3xy868qjg9vn1ktze72cb"><shadow type="math_number" id="aI|6tB6N.Fw@U[5~7B}y"><field name="NUM">-180</field></shadow></value><value name="6setg2gnbztk7fvtxq07"><shadow type="math_number" id="#=rrf_C|--d|J%vxm5my"><field name="NUM">0</field></shadow></value><value name="dyngo154fjsl0mxkm0iuj"><shadow type="math_number" id="T*Ecq=2H8^Mf3=fer-SI"><field name="NUM">200</field></shadow></value><next><block type="device_show_leds" id="Ctin3(_+3.^YRer2D{G,"><field name="LEDS">`
        . . # . . 
        . . . # . 
        # # # # # 
        . . . # . 
        . . # . .
        `</field><comment pinned="false" h="80" w="160">顯示右轉圖標</comment><next><block type="device_pause" id=")x1Bi9cj)!4fl$IRGgT:"><comment pinned="false" h="80" w="160">持續指定時間</comment><value name="pause"><shadow type="timePicker" id="ciXz+IlnyPrr]zguD85!"><field name="ms">NaN</field></shadow><block type="argument_reporter_number" id="^{ed=7pJ]-f?-#Xh[g[4"><field name="VALUE">duration</field></block></value><next><block type="function_call" id="-`LkKLH?%[z2Wrt*Mi*4"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation><comment pinned="false" h="80" w="160">停止</comment></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="K]MeDg~ms5o?f/sCcwUZ" x="1924" y="1721"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation><field name="function_name">stop</field><comment pinned="false" h="80" w="160">停止：所有電機速度設為0</comment><statement name="STACK"><block type="function_call" id="6#KhFo^GK!Qcu[uZaNeP"><mutation name="move" functionid="D1q!$|l^!4c*Ve)S;U}S"><arg name="m1Speed" id="i0tkc1ax8vhuxqs3lu286" type="number"></arg><arg name="m2Speed" id="3xy868qjg9vn1ktze72cb" type="number"></arg><arg name="m3Speed" id="6setg2gnbztk7fvtxq07" type="number"></arg><arg name="m4Speed" id="dyngo154fjsl0mxkm0iuj" type="number"></arg></mutation><value name="i0tkc1ax8vhuxqs3lu286"><shadow type="math_number" id="#}bog:5vl0u#SnyKY(-K"><field name="NUM">1</field></shadow><block type="variables_get" id="nJ(bvwlR$DI_M-;Ri)DK"><field name="VAR" id="]tL_Wxd0M6f,fcQwy,3r">STOP_SPEED</field></block></value><value name="3xy868qjg9vn1ktze72cb"><shadow type="math_number" id="F=8s{!LGKUkf:hy=yo;U"><field name="NUM">1</field></shadow><block type="variables_get" id=";{[_nNT%PoN7w]@xT)#S"><field name="VAR" id="]tL_Wxd0M6f,fcQwy,3r">STOP_SPEED</field></block></value><value name="6setg2gnbztk7fvtxq07"><shadow type="math_number" id="^5oRqXR8o*x=gG82IMB|"><field name="NUM">1</field></shadow><block type="variables_get" id="XIJCNah*]!i9~L]M41M0"><field name="VAR" id="]tL_Wxd0M6f,fcQwy,3r">STOP_SPEED</field></block></value><value name="dyngo154fjsl0mxkm0iuj"><shadow type="math_number" id="{%+Z%P5|pL8-Wn%g@OYN"><field name="NUM">1</field></shadow><block type="variables_get" id="P~GV:gM$wo9`WL.^?fn("><field name="VAR" id="]tL_Wxd0M6f,fcQwy,3r">STOP_SPEED</field></block></value><next><block type="device_show_leds" id="-IT(A}xN+$#u_sm_y0ED"><field name="LEDS">`
        . . . . . 
        . . . . . 
        . # # # . 
        . . . . . 
        . . . . .
        `</field><comment pinned="false" h="80" w="160">顯示停止圖標</comment><next><block type="device_clear_display" id="0*$P,ARb$[t(M6Z5,Wps"><data>{"commentRefs":[],"fieldData":{}}</data></block></next></block></next></block></statement></block><block type="function_definition" id="m2z%s6W9247URsVz8eeU" x="2636" y="1721"><mutation name="showError" functionid="|R+LsozALRb5qfjDWWk@"></mutation><field name="function_name">showError</field><comment pinned="false" h="80" w="160">顯示錯誤並停止</comment><statement name="STACK"><block type="device_show_leds" id="@=vyj~R,Syd6dTw$oBHU"><field name="LEDS">`
        # . . . # 
        . # . # . 
        . . # . . 
        . # . # . 
        # . . . #
        `</field><comment pinned="false" h="80" w="160">顯示錯誤圖標（叉形）</comment><next><block type="device_clear_display" id="iHa!eeS,}.AGb@OOU:~["><data>{"commentRefs":[],"fieldData":{}}</data><next><block type="function_call" id="[~`y;uKog;nbUgW3XBDh"><mutation name="stop" functionid="]eeF@|g[52Llab|*;JaS"></mutation></block></next></block></next></block></statement></block></xml>